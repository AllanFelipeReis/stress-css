/*
  stress-css 0.1.0 <https://github.com/andyedinborough/stress-css>
  Copyright (c) 2013 Andy Edinborough (@andyedinborough)

  Released under MIT License
*/
(function(e,t){"use strict";var n=function(){var e=function(e){this.text=(e||"")+"",this.position=-1,this.length=this.text.length};return e.prototype.read=function(e){var t=this.peek(e);return this.position=Math.min(this.length,this.position+(e||1)),t},e.prototype.readAll=function(){if(this.position>=this.length)return t;var e=this.text.substr(this.position+1);return this.position=this.length,e},e.prototype.peek=function(e){return this.position+1>=this.length?t:this.text.substr(this.position+1,e||1)},e.prototype.seek=function(e,t){return this.position=Math.max(0,Math.min(this.length,(t===0?0:t===2?this.length:this.position)+(e||1))),this.position===this.length},e.prototype.readUntil=function(e){function o(e){return t=e.length,s.next=r[t]||(r[t]=n.peek(t)),s.next===e}typeof e=="string"&&(e=[e]);var t,n=this,r=[],i=e.length,s={value:"",next:""};for(;;){r.length=0;if(e.some(o))return this.seek(t),s;s.next=this.read();if(!s.next)break;s.value+=s.next}return s},e}(),r=function(){function e(){this.media={}}function r(e,t){this.sheet=e,this.name=t,this.rules=[]}function i(e,t){this.url=t,this.media=e}function s(e,t,n){this.media=e,this.selector=t,this.disabled=!1,this.properties=n}function o(e){var t=[],r=new n(e),i;while((i=r.readQuotedUntil(":")).next)t.push({name:i.value.trim(),value:r.readQuotedUntil(";").value.trim()});return t}function u(e){var t=new n(e),r=t.readUntil("("),i=t.peek();return i==='"'||i==="'"?r=t.readUntil(i):r=t.readUntil(")"),{url:r.value,media:(t.readAll()||"all").trim()}}return n.prototype.readQuotedUntil=function(e){var t="",n;typeof e=="string"&&(e=[e]),e.push('"',"'","/*");while(n=this.readUntil(e)){t+=n.value;if(n.next==='"'||n.next==="'")t+=n.next,n=this.readUntil(n.next),t+=n.value+n.next;else{if(n.next!=="/*")break;this.readUntil("*/")}}return{value:t,next:n.next}},e.prototype.toString=function(){var e=this.media;return Object.keys(e).map(function(t){return e[t]}).join("\n\n")},e.prototype.getMedia=function(e){return this.media[e]||(this.media[e]=new r(this,e))},r.prototype.toString=function(){var e=this.name==="all";return(e?"":"@media "+this.name+" {\n")+this.rules.filter(function(e){return!e.disabled}).join("\n")+(e?"":"\n}")},i.prototype.toString=function(){var e=this.media.name==="all"?"":"  ";return e+'@import url("'+this.url+'");'},s.prototype.toString=function(){var e=this.media.name==="all"?"":"  ";return e+this.selector+" {"+this.properties.map(function(t){return"\n  "+e+t.name+": "+t.value+";"}).join("")+"\n"+e+"}"},function(a){var f=new n(a),l=new e,c,h,p;for(;;){h=f.readQuotedUntil(["{","}",";"]),h.value=h.value.trim(),p=h.value.toLowerCase();if(h.next==="{")p.substr(0,6)==="@media"?c=l.getMedia(h.value.substr(6).trim().toLowerCase()):(c||(c=l.getMedia("all")),c.rules.push(new s(c,h.value,o(f.readQuotedUntil("}").value))));else if(h.next===";"){if(p.substr(0,7)==="@import"){var d=u(h.value),v=l.getMedia(d.media);v.rules.push(new i(v,d.url))}}else{c=t;if(!h.next)break}}return l}}()})(window);